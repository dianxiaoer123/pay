<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>发起付款接口</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/owl.carousel.min.css">
	<link rel="stylesheet" type="text/css" href="css/animations.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/responsive.css">
	<link href="css/kefu.css" rel="stylesheet">
	<link rel="stylesheet" href="css/global.css">

	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/main.js"></script>

</head>

<body>
	<div class="wrapper">
		<header>
			<div class="container">
				<div class="row">
					<div class="col-md-2">
						<div class="logo">
							<a href="#">
								<img src="images/logo.png" alt="logo">
							</a>
						</div>
					</div>
					<div class="col-md-7">
						<ul class="menu">
							<li>
								<a href="首页.html">网站首页</a>
							</li>

							<li class="children">
								<a href="javascript:;">新手引导</a>
								<ul class="sub-menu">
									<li>
										<a href="注册.html">免费注册</a>
									</li>
									<li>
										<a href="准备工作.html">API文档</a>
									</li>
									<li>
										<a href="常见问题.html">常见问题</a>
									</li>
								</ul>
							</li>

							<li class="children">
								<a href="javascript:;">API接入文档</a>
								<ul class="sub-menu">
									<li>
										<a href="准备工作.html">准备工作</a>
									</li>
									<li>
										<a href="发起付款接口.html">付款接口</a>
									</li>
									<li>
										<a href="查询接口.html">订单查询</a>
									</li>
								</ul>
							</li>
							<li class="children">
								<a href="javascript:;">帮助中心</a>
								<ul class="sub-menu">
									<li>
										<a href="常见问题.html">接入常见问题</a>
									</li>
									<li>
										<a href="使用过程中问题.html">使用问题</a>
									</li>
								</ul>
							</li>

							<li>
								<a href="关于我们.html">关于我们</a>
							</li>

						</ul>
					</div>

					<div class="col-md-3">

						<div class="button-header">
							<a href="登录.html" class="custom-btn login">登录</a>
							<a href="注册.html" class="custom-btn">注册</a>
						</div>

					</div>
				</div>
			</div>
			<div class="mobile-block">
				<div class="logo-mobile">
					<a href="#">
						<img src="images/logo.png" alt="logo">
					</a>
				</div>
				<a href="javascript:;" class="mobile-menu-btn">
					<span></span>
				</a>
				<div class="mobile-menu">
					<div class="inside">
						<div class="logo">
							<a href="#" style="display: inline-block;">
								<img src="images/logo.png" alt="logo">
							</a>
						</div>
						<!--logo-->
						<ul class="menu panel-group" id="accordion" aria-multiselectable="true">
							<li>
								<a href="首页.html">网站首页</a>
							</li>
							<li class="children panel">
								<a href="新手引导.html" class="collapsed" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="menu1">新手引导</a>
								<ul class="sub-menu panel-collapse collapse" id="menu1">
									<li>
										<a href="注册.html">免费注册</a>
									</li>
									<li>
										<a href="准备工作.html">API文档</a>
									</li>
									<li>
										<a href="常见问题.html">常见问题</a>
									</li>
								</ul>
							</li>
							<li class="children panel">
								<a href="API接入文档.html" class="collapsed" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="menu2">API接入文档</a>
								<ul class="sub-menu panel-collapse collapse" id="menu2">
									<li>
										<a href="准备工作.html">准备工作</a>
									</li>
									<li>
										<a href="付款接口.html">付款接口</a>
									</li>
									<li>
										<a href="订单查询.html">订单查询</a>
									</li>
								</ul>
							</li>
							<li class="children panel">
								<a href="帮助中心.html" class="collapsed" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="menu3">帮助中心</a>
								<ul class="sub-menu panel-collapse collapse" id="menu3">
									<li>
										<a href="接入常见问题.html">接入常见问题</a>
									</li>
									<li>
										<a href="使用问题.html">使用问题</a>
									</li>
								</ul>
							</li>
							<li>
								<a href="关于我们.html">关于我们</a>
							</li>

						</ul>
						<!--menu-->

						<div class="button-header">
							<a href="登录.html" class="custom-btn login">登录</a>
							<a href="注册.html" class="custom-btn">注册</a>

						</div>
					</div>

				</div>
				<!--mobile-menu-->
			</div>
		</header>


		<div class="main-container container">
			<div class="row animatedParent">
				<div class="col-md-3 col-xs-12">
					<aside class="animated bounceInRight go">
						<div class="widget">
							<h4 class="widget-title">API接入文档</h4>
							<ul class="nav nav-pills nav-stacked">
								<li>
									<a href="准备工作.html">准备工作</a>
								</li>
								<li class="active">
									<a href="发起付款接口.html">发起付款接口</a>
								</li>
								<li>
									<a href="查询接口.html">查询接口</a>
								</li>
							</ul>
						</div>

					</aside>

				</div>

				<div class="col-md-9 col-xs-12">
					<article class="post animated bounceInLeft go">
						<div class="top-post">
							<h3>
								<a href="javascript:;"> 发起付款接口</a>
							</h3>
						</div>
						<!--top-post-->
						<div class="bottom-post">
							<p>我方平台提供有2种支付场景，可根据业务选择使用：</p>
							<h3>场景一：跳转我方平台支付网关支付</h3>
							<b>跳转支付页接口URL：</b>
							<pre>http://pay.tpayapi.com</pre>
							<b>传参方式：Post</b>
							<p>使用方法：用表单post的方式，post参数并跳转到此网址，显示我们的支付页。</p>
							<hr>
							<h3>场景二：自定义支付页</h3>
							<b>获取支付json数据接口URL：</b>
							<pre>http://pay.tpayapi.com?format=json</pre>
							<b>传参方式：Post</b>
							<p>说明：用curl的post方式传参数，并直接获取json返回值，显示在您自定义的支付页上。</p>
							<hr>

							<h5>请求参数：</h5>
							<table class="table table-striped table-bordered">
								<thead>
									<tr>
										<th>#</th>
										<th>参数名</th>
										<th>含义</th>
										<th>类型</th>
										<th>说明</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>1</td>
										<td>
											<small>uid</small>
										</td>
										<td>
											<small>商户uid</small>
										</td>
										<td>
											<small>int(11)</small>
										</td>
										<td>
											<small>必填。您的商户唯一标识，注册后在收款账号配置里获得。</small>
										</td>
									</tr>
									<tr>
										<td>2</td>
										<td>
											<small>qr_amount</small>
										</td>
										<td>
											<small>价格</small>
										</td>
										<td>
											<small>decimal(10,2)</small>
										</td>
										<td>
											<small>必填。单位：元，此处如果是</small>
										</td>
									</tr>
									<tr>
										<td>3</td>
										<td>
											<small>notify_url</small>
										</td>
										<td>
											<small>通知回调网址</small>
										</td>
										<td>
											<small>string(255)</small>
										</td>
										<td>
											<small>必填。用户支付成功后，我们服务器会主动发送一个post消息到这个网址。由您自定义。不要urlencode。例：http://www.tpayapi.com/notify</small>
										</td>
									</tr>
									<tr>
										<td>4</td>
										<td>
											<small>return_url</small>
										</td>
										<td>
											<small>跳转网址</small>
										</td>
										<td>
											<small>string(255)</small>
										</td>
										<td>
											<small>必填。用户支付成功后，我们会让用户浏览器自动跳转到这个网址。由您自定义。不要urlencode。例：http://www.tpayapi.com/return</small>
										</td>
									</tr>
									<tr>
										<td>5</td>
										<td>
											<small>order_number</small>
										</td>
										<td>
											<small>商户自定义订单号</small>
										</td>
										<td>
											<small>string(128)</small>
										</td>
										<td>
											<small>必填。我们会据此判别是同一笔订单还是新订单。我们回调时，会带上这个参数。例：201701160027368885458</small>
										</td>
									</tr>
									<tr>
										<td>6</td>
										<td>
											<small>order_uid</small>
										</td>
										<td>
											<small>商户自定义客户号</small>
										</td>
										<td>
											<small>string(128)</small>
										</td>
										<td>
											<small>必填。我们会显示在您后台的订单列表中，方便您看到是哪个用户的付款，方便后台对账。可以填用户名，也可以填您数据库中的用户uid。例：xxx, xxx@aaa.com</small>
										</td>
									</tr>
									<tr>
										<td>7</td>
										<td>
											<small>key</small>
										</td>
										<td>
											<small>秘钥</small>
										</td>
										<td>
											<small>string(32)</small>
										</td>
										<td>
											<small>必填。把使用到的所有参数，
												<strong>连密钥一起</strong>，按
												<mark>参数名</mark>字母升序排序。把
												<mark>参数值</mark>拼接在一起。做md5-32位加密，取字符串大写。得到key。网址类型的参数值不要urlencode。</small>
										</td>
									</tr>
									<tr>
										<td>8</td>
										<td>
											<small>type</small>
										</td>
										<td>
											<small>支付渠道</small>
										</td>
										<td>
											<small>int(11)</small>
										</td>
										<td>
											<small>必填。1：支付宝； 2：微信</small>
										</td>
									</tr>
								</tbody>
							</table>
							<p>key的拼接顺序：如用到了所有参数，就按这个顺序拼接：notify_url + order_number + order_uid + qr_amount + return_url + type + uid + merkey(merkey不参与排序)</p>
							<p>如:notify_url=1；order_number=2；order_uid=3；qr_amount=4</p>
							<p>那么加密拼接应该为1234,不要‘=’、‘?’、‘&amp;’等</p>
							<p class="text-danger">
								<strong>注意：merkey在安全上非常重要，一定不要显示在任何网页代码、网址参数中。只可以放在服务端。计算key时，先在服务端计算好，把计算出来的key传出来。严禁在客户端计算key，严禁在客户端存储merkey。</strong>
							</p>
							<h5>Json请求【成功】的返回值：</h5>
							<pre>{
    //0失败 1成功
    "ret": 1,
    "data": {
        //显示给用户的订单金额(一定要把这个价格显示在支付页上，而不是订单金额)
        "amount": "108",
        //订单号
        "order_number": "A2018010112376",
        // //二维码信息，如果没返回，说明存在错误，参考msg的信息
        "qr_code": "HTTPS://QR.ALIPAY.COM/FKX00849HD6HRIS0QETICA",
        //判断支付成功后，要同步跳转的URL
        "return_url": "http:baidu.com/return",
        //支付渠道：1-支付宝；2-微信
        "type": 1
    },
    ////提示给用户的文字信息，会根据不同场景，展示不同内容
    "message": "付款即时到账 未到账可联系我们",
    "list": null,
    "map": null
}
						   </pre>
							<h5>----------------------------压缩格式------------------------------------</h5>
							<pre>{"ret":1,"data":{"amount":"108","order_number":"A2018010112376","qr_code":"HTTPS://QR.ALIPAY.COM/FKX00849HD6HRIS0QETICA","return_url":"http:baidu.com/return","type":1},"message":"付款即时到账 未到账可联系我们","list":null,"map":null}</pre>
							<h5>Json请求【失败】的返回值：</h5>
							<pre>						   {
	//0失败 1成功
	"ret": 0,
	"data": null,
	//错误信息
	"message": "未找到参数:return_url",
	"list": null,
	"map": null
}
						   </pre>
							<h5>----------------------------压缩格式------------------------------------</h5>
							<pre>{"ret":0,"data":null,"message":"未找到参数:return_url","list":null,"map":null}</pre>
							<div class="space-bottom"></div>
							<div class="space-bottom"></div>
							<!-- page-title start -->
							<!-- ================ -->
							<br>
							<br>
							<!-- page-title start -->
							<!-- ================ -->
							<h4 class="page-title">付款成功回调通知</h4>
							<hr>
							<!-- page-title end -->

							<p>用户付款成功后，我们会向您在发起付款接口传入的
								<mark>notify_url</mark>网址发送通知。您的服务器只要返回200状态，就表示回调已收到。如果返回状态不是200，我们会再尝试回调3次，每次间隔1分钟。</p>
							<h5>传参方式：Post</h5>
							<h5>参数内容：</h5>
							<table class="table table-striped table-bordered">
								<thead>
									<tr>
										<th>#</th>
										<th>参数名</th>
										<th>含义</th>
										<th>类型</th>
										<th>说明</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>1</td>
										<td>
											<small>amount</small>
										</td>
										<td>
											<small>实际支付金额</small>
										</td>
										<td>
											<small>string(128)</small>
										</td>
										<td>
											<small>一定存在。用户实际付款金额</small>
										</td>
									</tr>
									<tr>
										<td>2</td>
										<td>
											<small>order_number</small>
										</td>
										<td>
											<small>订单号</small>
										</td>
										<td>
											<small>string(128)</small>
										</td>
										<td>
											<small>一定存在。是您在发起付款接口传入的您的自定义订单号</small>
										</td>
									</tr>
									<tr>
										<td>3</td>
										<td>
											<small>key</small>
										</td>
										<td>
											<small>秘钥</small>
										</td>
										<td>
											<small>string(32)</small>
										</td>
										<td>
											<small>一定存在。我们把使用到的所有参数，
												<strong>连您的merkey一起</strong>，按
												<mark>参数名</mark>字母升序排序。把
												<mark>参数值</mark>拼接在一起。做md5-32位加密，取字符串大写。得到key。您需要在您的服务端按照同样的算法，自己验证此key是否正确。只在正确时，执行您自己逻辑中支付成功代码。</small>
										</td>
									</tr>
								</tbody>
							</table>
							<p>key的拼接顺序：如用到了所有参数，就按这个顺序拼接：amount + order_number + merkey(merkey不参与排序)</p>
							<div class="space-bottom"></div>
							<div class="space-bottom"></div>
							<!-- page-title start -->
							<!-- ================ -->
							<h4 class="page-title">付款成功自动跳转</h4>
							<hr>
							<!-- page-title end -->

							<p>用户付款成功后，我们会在先通过上面的接口，通知您服务器付款成功，再过1-3秒后将用户跳转到您在发起付款接口传入的
								<mark>return_url</mark>网址。</p>
							<p class="text-danger">
								<strong>注意：请不要将此跳转认为是用户付款成功的判断条件，此行为极不安全。请根据我们的付款成功回调通知是否送到，来判断交易是否成功。</strong>
							</p>
							<div class="space-bottom"></div>
							<div class="space-bottom"></div>
						</div>
						<!--bottom-post-->
					</article>

				</div>

			</div>
		</div>
		<div class="pre-footer">
			<img src="images/line-prefoter.svg" alt="bg-prefooter">
		</div>


		<footer>
			<div class="container">
				<div class="widget-footer">
					<h4>使用帮助</h4>
					<ul>
						<li>
							<a href="注册.html">免费注册</a>
						</li>
						<li>
							<a href="准备工作.html">API文档</a>
						</li>
						<li>
							<a href="常见问题.html">常见问题</a>
						</li>
					</ul>
				</div>

				<div class="widget-footer">
					<h4>准备工作</h4>
					<ul>
						<li>
							<a href="准备工作.html">准备工作</a>
						</li>
						<li>
							<a href="发起付款接口.html">付款接口</a>
						</li>
						<li>
							<a href="查询接口.html">订单查询</a>
						</li>
					</ul>
				</div>

				<div class="widget-footer">
					<h4>API文档</h4>
					<ul>
						<li>
							<a href="常见问题.html">接入常见问题</a>
						</li>
						<li>
							<a href="使用过程中问题.html">使用问题</a>
						</li>
					</ul>
				</div>

				<div class="widget-footer">
					<h4>联系我们</h4>
					<ul>
						<li>
							<a target="_blank" href="javascript:void(0)">售前QQ：741479997</a>
						</li>
						<li>
							<a target="_blank" href="javascript:void(0)">技术QQ：741479997</a>
						</li>
						<li>
							<a>邮箱：tpayapi.com</a>
						</li>
					</ul>
				</div>

				<div class="widget-footer last">
					<a href="#" style="display: inline-block;">
						<img src="images/logo.png" alt="">
						<p>专为个人收款而生的支付工具。为支付宝、微信支付的个人账户，提供即时到账收款API接口。安全可靠，费率低。</p>

				</div>

				<div class="copyright">
					<p>© Copyright 2018 TPay免签支付, All Rights Reserved</p>
				</div>

			</div>
		</footer>

	</div>



	<!-- 客服部分 -->
	<div style="right: -230px;" class="contactusdiyou">
		<div class="hoverbtn">
			<span>联</span>
			<span>系</span>
			<span>我</span>
			<span>们</span>
			<img class="hoverimg" src="images/hoverbtnbg.gif" height="9" width="13">
		</div>
		<div class="conter">
			<div class="con1">
				<dl class="fn_cle">
					<dt>
						<img src="images/zxkfqq.png" height="31" width="31">
					</dt>
					<dd class="f1">咨询QQ：</dd>
					<dd class="f2">
						<span class="ph_num">874455351</span>
					</dd>
				</dl>
			</div>
			<div class="blank0"></div>
			<div class="qqcall">
				<dl class="fn_cle">
					<dt>
						<img src="images/zxkfqq.png" height="31" width="31">
					</dt>
					<dd class="f1 f_s14">在线客服：</dd>

					<dd class="f2 kefuQQ">
						<a target="_blank" href="javascript:void(0)">
							<img border="0" src="images/button-custom-qq.gif">
						</a>
						<br>
					</dd>
					<dt>
						<img src="images/zxkfqq.png" height="31" width="31">
					</dt>
					<dd class="f2 kefuQQ">
						<span>交流群</span>
						<a target="_blank" href="#">
							<img border="0" src="images/group.png">
						</a>
						<br>
					</dd>
				</dl>
			</div>
			<div class="blank0"></div>
			<div class="weixincall">
				<dl class="fn_cle">
					<dt>
						<img src="images/zxkfqq.png" height="31" width="31">
					</dt>
					<dd class="f1">QQ交流群：</dd>
					<dd class="f3">
						<a target="_blank" href="images/qun_code.jpg">
							<img src="images/qun_code.jpg" height="73" width="73">
						</a>
					</dd>
				</dl>
			</div>
			<div class="blank0"></div>
			<div class="dytimer">
				<span style="font-weight: bold;">公司官网：</span>
				<span>
					<a href="#" style="color:white">www.tpayapi.com</a>
				</span>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		$(function () {
			$(".contactusdiyou").hover(function () {
				$(".hoverimg").attr("src", "images/hoverbtnbg1.gif");
				$('.diyoumask').fadeIn();
				$('.contactusdiyou').animate({
					right: '0'
				}, 300);
			}, function () {
				$(".hoverimg").attr("src", "images/hoverbtnbg.gif");
				$('.contactusdiyou').animate({
					right: '-230px'
				}, 300, function () {});
				$('.diyoumask').fadeOut();
			});
		});
	</script>

</body>

</html>
